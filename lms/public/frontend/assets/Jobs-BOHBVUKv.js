import{i as P,e as u,f as l,g as t,k as b,t as o,h as n,l as e,bO as U,bw as z,n as d,p as j,B as F,r as _,s as M,o as q,A as D,a as L,w as R,b as A,u as E,d as I,j as g,_ as Q,P as G,C as H,bP as K,q as O,ag as W,F as X,x as Y}from"./index-C-smje0b.js";import{_ as Z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Bgj-T1K3.js";import{_ as ee}from"./EmptyState.vue_vue_type_script_setup_true_lang-BIEMuuna.js";const ae={class:"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-3"},le={class:"flex space-x-4 mb-4"},te={class:"flex flex-col space-y-2 flex-1"},se={class:"text-lg font-semibold text-ink-gray-9"},oe={class:"font-medium text-ink-gray-7 leading-5"},ne={class:"flex items-center space-x-1 text-sm text-ink-gray-7"},ie={key:0,class:"flex items-center space-x-1 text-sm text-ink-gray-7"},re={class:"space-x-2 mt-auto"},ce={__name:"JobCard",props:{job:{type:Object,default:null}},setup(s){const f=P("$dayjs");return(r,k)=>(l(),u("div",ae,[t("div",le,[t("div",te,[t("div",se,o(s.job.company_name),1),t("span",oe,o(s.job.job_title),1),t("div",ne,[n(e(U),{class:"size-3"}),t("span",null,o(s.job.location)+o(s.job.country?`, ${s.job.country}`:""),1)]),s.job.applicants?(l(),u("div",ie,[n(e(z),{class:"size-3"}),t("span",null,o(s.job.applicants)+" "+o(s.job.applicants>1?r.__("applicants"):r.__("applicant")),1)])):b("",!0)])]),t("div",re,[n(e(F),null,{default:d(()=>[j(o(s.job.type),1)]),_:1}),n(e(F),null,{default:d(()=>[j(o(e(f)(s.job.creation).fromNow()),1)]),_:1})])]))}},ue={class:""},de={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},me={key:0,class:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto p-5"},pe={class:"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0"},_e={key:1,class:"w-full md:w-4/5 mx-auto p-5 pt-0"},be={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ge={__name:"Jobs",setup(s){const f=P("$user"),r=_(null),{brand:k}=M(),m=_(""),v=_(null),c=_({}),w=_({}),h=_(0),T=window.read_only_mode;q(()=>{let a=new URLSearchParams(location.search);a.has("type")&&(r.value=a.get("type")),x(),B()});const y=D({url:"lms.lms.api.get_job_opportunities",cache:["jobs"]}),x=()=>{N(),y.update({params:{filters:c.value,orFilters:w.value}}),y.reload()},N=()=>{c.value.status="Open",c.value.disabled=0,r.value?c.value.type=r.value:delete c.value.type,m.value?w.value={job_title:["like",`%${m.value}%`],company_name:["like",`%${m.value}%`],location:["like",`%${m.value}%`]}:w.value={},v.value?c.value.country=v.value:delete c.value.country},B=()=>{L("lms.lms.api.get_count",{doctype:"Job Opportunity",filters:{status:"Open",disabled:0}}).then(a=>{h.value=a})};R(v,a=>{x()});const S=A(()=>["",{label:__("Full Time"),value:"Full Time"},{label:__("Part Time"),value:"Part Time"},{label:__("Contract"),value:"Contract"},{label:__("Freelance"),value:"Freelance"}]);return E(()=>({title:__("Jobs"),icon:k.favicon})),(a,p)=>{var C,J,V;const $=I("router-link");return l(),u("div",ue,[t("header",de,[n(e(Z),{class:"h-7",items:[{label:a.__("Jobs"),route:{name:"Jobs"}}]},null,8,["items"]),(C=e(f).data)!=null&&C.name?(l(),g($,{key:0,to:{name:"JobForm",params:{jobName:"new"}}},{default:d(()=>[e(T)?b("",!0):(l(),g(e(Q),{key:0,variant:"solid"},{prefix:d(()=>[n(e(G),{class:"h-4 w-4"})]),default:d(()=>[j(" "+o(a.__("New Job")),1)]),_:1}))]),_:1})):b("",!0)]),t("div",null,[h.value?(l(),u("div",me,[t("div",pe,o(a.__("{0} Open Jobs").format(h.value)),1),(J=e(y).data)!=null&&J.length||h.value>0?(l(),u("div",{key:0,class:H(["grid grid-cols-1 gap-2",e(f).data?"md:grid-cols-3":"md:grid-cols-2"])},[n(e(O),{type:"text",placeholder:a.__("Search"),modelValue:m.value,"onUpdate:modelValue":p[0]||(p[0]=i=>m.value=i),class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:x},{prefix:d(()=>[n(e(K),{class:"w-4 h-4 stroke-1.5 text-ink-gray-5",name:"search"})]),_:1},8,["placeholder","modelValue"]),e(f).data?(l(),g(W,{key:0,doctype:"Country",modelValue:v.value,"onUpdate:modelValue":p[1]||(p[1]=i=>v.value=i),placeholder:a.__("Country"),class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40"},null,8,["modelValue","placeholder"])):b("",!0),n(e(O),{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=i=>r.value=i),type:"select",options:S.value,class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",placeholder:a.__("Type"),onChange:x},null,8,["modelValue","options","placeholder"])],2)):b("",!0)])):b("",!0),(V=e(y).data)!=null&&V.length?(l(),u("div",_e,[t("div",be,[(l(!0),u(X,null,Y(e(y).data,i=>(l(),g($,{to:{name:"JobDetail",params:{job:i.name}},key:i.name},{default:d(()=>[n(ce,{job:i},null,8,["job"])]),_:2},1032,["to"]))),128))])])):(l(),g(ee,{key:2,type:"Job Openings"}))])])}}};export{ge as default};
//# sourceMappingURL=Jobs-BOHBVUKv.js.map
